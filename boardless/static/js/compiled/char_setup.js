// Generated by CoffeeScript 1.9.1
(function() {
  var bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  window.SkillControl = (function() {
    function SkillControl(freeSkillPoints, pointsToSpent) {
      this.freeSkillPoints = freeSkillPoints;
      this.pointsToSpent = pointsToSpent;
      this.do_binds = bind(this.do_binds, this);
      this.changeSkill = bind(this.changeSkill, this);
      this.do_binds();
    }

    SkillControl.prototype.changeSkill = function(idx, skill_id, modif) {
      var cat_id, curr_val, new_val;
      curr_val = parseInt($("#skill-" + skill_id).text(), 10);
      cat_id = $("#skill-" + skill_id).data("categoryId");
      new_val = curr_val + modif;
      if (new_val < 0 || this.freeSkillPoints[cat_id] < (this.pointsToSpent[cat_id] - modif) || (this.pointsToSpent[cat_id] - modif) < 0) {
        return;
      }
      this.pointsToSpent[cat_id] -= modif;
      $("#input-" + skill_id + "-mod").val(new_val);
      $("#skill-" + skill_id).text(new_val);
      return $("#category-points-" + cat_id).text(this.pointsToSpent[cat_id]);
    };

    SkillControl.prototype.do_binds = function() {
      $('.js-skill-dec').bind("click", (function(_this) {
        return function(e) {
          var $elem, db_id, skill_id;
          $elem = $(e.currentTarget);
          db_id = $elem.data("dbId");
          skill_id = $elem.data("skillId");
          return _this.changeSkill(db_id, skill_id, -1);
        };
      })(this));
      return $('.js-skill-inc').bind("click", (function(_this) {
        return function(e) {
          var $elem, db_id, skill_id;
          $elem = $(e.currentTarget);
          db_id = $elem.data("dbId");
          skill_id = $elem.data("skillId");
          return _this.changeSkill(db_id, skill_id, 1);
        };
      })(this));
    };

    return SkillControl;

  })();

}).call(this);

//# sourceMappingURL=char_setup.js.map
